
<mat-stepper #stepper class="responsive-stepper" [linear]="true" [orientation]="(stepperOrientation | async)!" (selectionChange)="onStepChange($event)">
  <app-loading></app-loading>

  <!-- ✅ DÜZELTME: Safe step access with null checks -->
  <mat-step
    [completed]="getStepCompleted(0)"
    label="(ISB) İhracat Sipariş Bildirimi Yükleme"
    [editable]="getStepEditable(0)">

    <app-invoice-upload #invoiceUploadComponent (invoiceUploaded)="invoiceUploaded()" (configurePallet)="configureEditModeInPalletComponent()"></app-invoice-upload>
  </mat-step>

  <mat-step
    [completed]="getStepCompleted(1)"
    label="Palet Kontrolü"
    [editable]="getStepEditable(1)">

    <app-pallet-control #palletControlComponent></app-pallet-control>
  </mat-step>

  <mat-step
    [completed]="getStepCompleted(2)"
    label="Sonuç Ekranı"
    [editable]="getStepEditable(2)">

    <app-result-step #resultStepComponent (shipmentCompleted)="onShipmentCompleted()"></app-result-step>
  </mat-step>
</mat-stepper>
